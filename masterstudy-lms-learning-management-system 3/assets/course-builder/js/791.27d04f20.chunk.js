"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[791,949],{3763:(e,t,n)=>{n.d(t,{h:()=>o});var r,i=n(65043);const s=["title","titleId"];function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(null,arguments)}function l(e,t){let{title:n,titleId:l}=e,o=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,s);return i.createElement("svg",a({width:17,height:19,viewBox:"0 0 17 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},o),n?i.createElement("title",{id:l},n):null,r||(r=i.createElement("path",{d:"M12.0424 0H1.93714C1.00661 0 0.25293 0.753684 0.25293 1.68421V13.4737H1.93714V1.68421H12.0424V0ZM14.5687 3.36842H5.30556C4.37503 3.36842 3.62135 4.12211 3.62135 5.05263V16.8421C3.62135 17.7726 4.37503 18.5263 5.30556 18.5263H14.5687C15.4992 18.5263 16.2529 17.7726 16.2529 16.8421V5.05263C16.2529 4.12211 15.4992 3.36842 14.5687 3.36842ZM14.5687 16.8421H5.30556V5.05263H14.5687V16.8421Z"})))}const o=i.forwardRef(l);n.p},10290:(e,t,n)=>{n.d(t,{h:()=>o});var r,i=n(65043);const s=["title","titleId"];function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(null,arguments)}function l(e,t){let{title:n,titleId:l}=e,o=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,s);return i.createElement("svg",a({width:19,height:18,viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},o),n?i.createElement("title",{id:l},n):null,r||(r=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.00488 18C13.9754 18 18.0049 13.9706 18.0049 9C18.0049 4.02944 13.9754 0 9.00488 0C4.03432 0 0.00488281 4.02944 0.00488281 9C0.00488281 13.9706 4.03432 18 9.00488 18ZM9.94238 8.0625H11.8174C12.066 8.0625 12.3045 8.16127 12.4803 8.33709C12.6561 8.5129 12.7549 8.75136 12.7549 9C12.7549 9.24864 12.6561 9.4871 12.4803 9.66291C12.3045 9.83873 12.066 9.9375 11.8174 9.9375H9.94238V11.8125C9.94238 12.0611 9.84361 12.2996 9.6678 12.4754C9.49198 12.6512 9.25352 12.75 9.00488 12.75C8.75624 12.75 8.51779 12.6512 8.34197 12.4754C8.16615 12.2996 8.06738 12.0611 8.06738 11.8125V9.9375H6.19238C5.94374 9.9375 5.70529 9.83873 5.52947 9.66291C5.35365 9.4871 5.25488 9.24864 5.25488 9C5.25488 8.75136 5.35365 8.5129 5.52947 8.33709C5.70529 8.16127 5.94374 8.0625 6.19238 8.0625H8.06738V6.1875C8.06738 5.93886 8.16615 5.7004 8.34197 5.52459C8.51779 5.34877 8.75624 5.25 9.00488 5.25C9.25352 5.25 9.49198 5.34877 9.6678 5.52459C9.84361 5.7004 9.94238 5.93886 9.94238 6.1875V8.0625Z"})))}const o=i.forwardRef(l);n.p},82192:(e,t,n)=>{n.d(t,{v:()=>u});var r=n(89379),i=n(65043),s=n(61667),a=n(42703),l=n(54765),o=n(57076),c=n(70579);const d=e=>{const{__:__}=(0,s.WD)();return(0,c.jsxs)(o.c.SingleValue,(0,r.A)((0,r.A)({},e),{},{children:[__("Status:")," ",e.data.label]}))},u=e=>{let{onChange:t,value:n,includeAll:r,isSelectField:o,name:u,options:p,label:x}=e;const{__:__}=(0,s.WD)(),h=(0,i.useMemo)((()=>{const e=[];return r&&e.push({id:"all",label:__("All")}),e.push(...p),e}),[]);return o&&u?(0,c.jsx)(l.zM,{label:x,name:u,options:h}):(0,c.jsx)(a.l,{placeholder:__("Status"),options:h,value:n,onChange:e=>null===t||void 0===t?void 0:t(e),components:{SingleValue:d}})}},95426:(e,t,n)=>{n.d(t,{O:()=>l,k:()=>o});var r=n(63147),i=n(24653),s=n(23086);const a={d:"dd",j:"d",m:"MM",n:"M",F:"MMMM",M:"MMM",Y:"yyyy",y:"yy"},l=e=>{const t=window.lmsApiSettings.wp_date_format||"dd.MM.yyyy";if(!(0,r.f)(e))return"";const n=t.replace(/[djmnyYFM]/g,(e=>a[e]||e));const l=(0,i.H)(e.toISOString());return(0,s.GP)(l,n)},o=(e,t)=>{const n=e instanceof Date?e:new Date(1e3*e);return{date:l(n),time:n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",timeZone:t})}}},91623:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Oe});var r=n(3898),i=n(59579),s=n(66464),a=n(31590),l=n(65043),o=n(79478),c=n(82256),d=n(79060),u=n(82907),p=n(51585),x=n(61667);let h=function(e){return e.FULL_SITE="full-site",e.ALL_COURSES="all-courses",e.ALL_BUNDLES="all-bundles",e.ALL_COURSES_AND_BUNDLES="all-courses-and-bundles",e.ALL_MEMBERSHIP_PLANS="all-membership-plans",e.SPECIFIC_COURSES="specific-courses",e.SPECIFIC_BUNDLES="specific-bundles",e.SPECIFIC_CATEGORIES="specific-categories",e.SPECIFIC_MEMBERSHIP_PLANS="specific-membership-plans",e}({}),m=function(e){return e.ACTIVE="active",e.INACTIVE="inactive",e.EXPIRED="expired",e}({}),_=function(e){return e.COURSE="course",e.BUNDLE="bundle",e.CATEGORY="category",e.MEMBERSHIP="membership",e}({}),C=function(e){return e.PERCENT="percent",e.AMOUNT="amount",e}({});const g=()=>{const{__:__}=(0,x.TO)();return[{id:m.ACTIVE,label:__("Active")},{id:m.INACTIVE,label:__("Inactive")}]},j=e=>{const{__:__}=(0,x.TO)();switch(e){case h.FULL_SITE:return __("All courses, bundles and memberships");case h.ALL_BUNDLES:return __("All bundles");case h.ALL_COURSES:return __("All courses");case h.ALL_COURSES_AND_BUNDLES:return __("All courses and bundles");case h.ALL_MEMBERSHIP_PLANS:return __("All membership plans");case h.SPECIFIC_BUNDLES:return __("Specific bundles");case h.SPECIFIC_CATEGORIES:return __("Specific categories");case h.SPECIFIC_COURSES:return __("Specific courses");case h.SPECIFIC_MEMBERSHIP_PLANS:return __("Specific membership plans")}},f=e=>{const{__:__}=(0,x.TO)();switch(e){case m.ACTIVE:return __("Active");case m.INACTIVE:return __("Inactive");case m.EXPIRED:return __("Expired")}},b=e=>{switch(e){case _.COURSE:return"stm-courses";case _.BUNDLE:return"stm-course-bundles";case _.CATEGORY:return"categories";case _.MEMBERSHIP:return"membership-plans"}},y=e=>{var t,n;return{title:e.title,coupon_status:e.isActive?m.ACTIVE:m.INACTIVE,code:e.code,discount_type:e.discount_type,discount:e.discount,product_type:e.product_type,usage_limit:e.limit_enabled?e.usage_limit:null,user_usage_limit:e.user_limit_enabled?e.user_usage_limit:null,min_purchase_amount:"amount"===e.min_requirements?e.min_purchase_amount:null,min_course_quantity:"quantity"===e.min_requirements?e.min_course_quantity:null,start_date:null!==(t=e.start_date)&&void 0!==t?t:(new Date).getTime(),start_time:null!==(n=e.start_time)&&void 0!==n?n:"00:00",end_date:e.enable_end_date?e.end_date:null,end_time:e.enable_end_date?e.end_time:null,items:e.items.map((e=>e.ID))}},w=()=>({title:"",coupon_status:m.ACTIVE,usage_limit:null,code:"",discount_type:C.PERCENT,discount:0,product_type:h.FULL_SITE,user_usage_limit:null,min_purchase_amount:null,min_course_quantity:null,start_date:(new Date).getTime(),start_time:"00:00",enable_end_date:!1,end_date:null,end_time:null,min_requirements:"",user_limit_enabled:!1,limit_enabled:!1,items:[],isActive:!0,isExpired:!1}),v=e=>{const t=(0,p.gf)();return(0,u.useQuery)({queryKey:["coupon",e],enabled:!!e,queryFn:async()=>(e=>{var t,n,r,i;const{currency_info:s}=window.react_default_vars||{};return{title:e.title,coupon_status:e.coupon_status,usage_limit:e.usage_limit,code:e.code,discount_type:e.discount_type,discount:e.discount,product_type:e.product_type,user_usage_limit:e.user_usage_limit,min_purchase_amount:e.min_purchase_amount,min_course_quantity:e.min_course_quantity,start_date:null!==(t=e.start_date)&&void 0!==t?t:0,start_time:null!==(n=e.start_time)&&void 0!==n?n:"",enable_end_date:null!==e.end_date,end_date:null!==(r=e.end_date)&&void 0!==r?r:0,end_time:null!==(i=e.end_time)&&void 0!==i?i:"",min_requirements:null!==e.min_purchase_amount?"amount":null!==e.min_course_quantity?"quantity":"",user_limit_enabled:null!==e.user_usage_limit,limit_enabled:null!==e.usage_limit&&e.usage_limit>0,items:e.detail_items.map((e=>{var t;return{ID:e.object_id,post_title:e.object.name,symbol:null!==(t=null===s||void 0===s?void 0:s.currency_symbol)&&void 0!==t?t:"",post_type:b(e.object_type),price:e.object.price,image:{url:e.object.image_url},link:e.link}})),isActive:e.coupon_status===m.ACTIVE,isExpired:e.is_expired}})(await t.coupons.getCoupon(e))})};var E=n(70579);const S=(0,l.createContext)(null),I=e=>{let{children:t}=e;const{page:n,perPage:r}=(0,c.pH)(),[i,x]=(0,l.useState)(n||1),[h,m]=(0,l.useState)(r||10),[_,C]=(0,l.useState)(""),[g,j]=(0,l.useState)("all"),[f,b]=(0,l.useState)((0,d.Fw)("coupons",null)),[y,w]=(0,l.useState)([]),{sort:v,onSort:I}=(0,c.y8)(),[A,D]=(0,l.useState)(0),{isOpen:P,onOpen:O,onClose:L}=(0,s.j)(),k=((e,t,n,r,i,s)=>{const a=(0,p.gf)();return(0,u.useQuery)({queryKey:["coupons",e,t,n,r,i,s],queryFn:async()=>{const l="all"===r?"":r;return await a.coupons.getCoupons(e,t,n,l,i,s)}})})(i,h,(0,o.d7)(_,500),g,f,v);return(0,l.useEffect)((()=>{k.data&&D(k.data.recordsTotal)}),[k.data]),(0,E.jsx)(S.Provider,{value:{page:i,setPage:x,perPage:h,setPerPage:m,search:_,setSearch:C,status:g,setStatus:j,total:A,setDateRange:b,selectedRows:y,setSelectedRows:w,sort:v,onSort:I,query:k,isDetailsOpen:P,onDetailsClose:L,onDetailsOpen:O},children:k.error?(0,E.jsx)(a.az,{children:"Error"}):t})},A=()=>{const e=(0,l.useContext)(S);if(!e)throw new Error("useCouponsContext must be used within an CouponsProvider");return e};var D=n(89379),P=n(34688),O=n(21989),L=n(65025),k=n(95716),M=n(79523),R=n(36211),z=n(99887),T=n(82597),V=n(95426),F=n(3763);const U=()=>{const e=(0,u.useQueryClient)(),t=(0,p.gf)();return(0,u.useMutation)({mutationFn:async e=>t.coupons.bulkAction({action:e.action,coupons:e.items}),onSuccess:()=>{e.invalidateQueries({queryKey:["coupons"]})}})};var q=n(82192);const N=e=>(0,E.jsx)(q.v,(0,D.A)((0,D.A)({},e),{},{options:g()}));var W=n(32172),B=n(63754),H=n(61120),G=n(13585),Y=n(24858),Z=n(38808),Q=n(54765);const K=e=>{let{name:t,label:n}=e;const{__:__}=(0,x.WD)(),r=[{label:__("Percent"),id:C.PERCENT},{label:__("Fixed Amount"),id:C.AMOUNT}];return(0,E.jsx)(Q.zM,{name:t,label:n,options:r})},$=e=>{let{name:t,label:n}=e;const r=(0,l.useMemo)((()=>Object.values(h).filter((e=>(e=>{var t,n;const r=null!==(t=null===(n=window.react_default_vars)||void 0===n?void 0:n.enabled_addons)&&void 0!==t?t:{};switch(e){case h.ALL_MEMBERSHIP_PLANS:case h.SPECIFIC_MEMBERSHIP_PLANS:return!!r.subscriptions;case h.ALL_BUNDLES:case h.ALL_COURSES_AND_BUNDLES:case h.SPECIFIC_BUNDLES:return!!r.course_bundle;default:return!0}})(e))).map((e=>({id:e,label:j(e)})))),[]);return(0,E.jsx)(Q.zM,{name:t,label:n,options:r})};var X=n(47894);const J=e=>{let{name:t,children:n,title:r,hintHeader:i,hintText:s,inline:a=!0,type:l="checkbox",click:o}=e;const c=(0,Y.xW)().watch(t);return(0,E.jsxs)(O.s,{w:"100%",h:"60px",border:"1px solid",align:a?"center":"flex-start",p:a?"10px 20px":"20px",borderColor:c?"primary":"border",bg:c?"primary10":"transparent",flexDirection:a?"row":"column",gap:"radio"===l?"10px":"",cursor:o&&"pointer",justify:"space-between",borderRadius:"8px",onClick:o,sx:{".chakra-form__error-message":{position:"relative"},"&:has(.chakra-radio__control[data-checked])":{bg:"primary10",borderColor:"primary"},".chakra-radio__control":{borderColor:"border"},".chakra-radio__control[data-checked]":{borderColor:"primary"},"& .chakra-form__error-message":{display:"none"}},children:["checkbox"===l?(0,E.jsx)(Q.by,{name:t,label:r,hint:s,header:i}):(0,E.jsx)(X.s,{id:t,value:t,children:(0,E.jsx)(P.E,{mb:"0",fontSize:"sm",lineHeight:"normal",whiteSpace:"nowrap",children:r})}),n]})};var ee=n(12620),te=n(78672),ne=n(17284);const re=e=>{let{options:t,name:n,flexProps:r}=e;const{field:i,fieldState:s}=(0,Y.as)({name:n}),{error:a}=s,{setValue:l}=(0,Y.xW)();return(0,E.jsxs)(ee.MJ,{isInvalid:!!a,children:[(0,E.jsx)(te.z,(0,D.A)((0,D.A)({},i),{},{variant:"msVariant",children:(0,E.jsx)(O.s,(0,D.A)((0,D.A)({flexDirection:"column"},r),{},{gap:"10px",children:t.map((e=>{var t;return(0,E.jsx)(J,{type:"radio",name:String(e.id),title:e.label,inline:!!e.renderer,click:()=>l(n,e.id,{shouldDirty:!0}),children:null===(t=e.renderer)||void 0===t?void 0:t.call(e,e)},e.id)}))}))})),a&&(0,E.jsx)(ne.Wt,{children:a.message})]})},ie=()=>{var e,t;const{__:__}=(0,x.WD)(),n=(0,Y.xW)(),{min_requirements:r}=n.watch(),{currency_symbol:i}=null!==(e=null===(t=window.react_default_vars)||void 0===t?void 0:t.currency_info)&&void 0!==e?e:{},s=[{label:__("No Minimum Requirement"),id:""},{label:__("Minimum Order Amount (".concat(i,")")),id:"amount",renderer:()=>(0,E.jsx)(O.s,{maxW:"290px",w:"100%",onClick:e=>e.stopPropagation(),sx:{"& .chakra-form__error-message":{display:"none"}},children:"amount"===r&&(0,E.jsx)(Q.oz,{name:"min_purchase_amount",withButtons:!0})})},{label:__("Minimum Items Quantity"),id:"quantity",renderer:()=>(0,E.jsx)(O.s,{maxW:"290px",w:"full",onClick:e=>e.stopPropagation(),sx:{"& .chakra-form__error-message":{display:"none"}},children:"quantity"===r&&(0,E.jsx)(Q.oz,{name:"min_course_quantity",withButtons:!0})})}];return(0,E.jsx)(re,{name:"min_requirements",options:s})};var se,ae=n(77482);const le=["title","titleId"];function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oe.apply(null,arguments)}function ce(e,t){let{title:n,titleId:r}=e,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,le);return l.createElement("svg",oe({width:4,height:40,viewBox:"0 0 4 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,se||(se=l.createElement("path",{d:"M2 0V40",stroke:"white",strokeWidth:4,strokeDasharray:"4 2"})))}const de=l.forwardRef(ce);n.p;var ue=n(10290),pe=n(19316),xe=n(54732);const he=e=>{var t,n,i;let{editId:s,onProductsDrawerOpen:c,drawerEl:d,onClose:_,isLoading:g}=e;const{__:__}=(0,x.WD)(),b=(0,Y.xW)(),{mutateAsync:w,isLoading:v}=(()=>{const e=(0,p.gf)();return(0,u.useMutation)({mutationFn:async t=>e.coupons.createCoupon(y(t))})})(),{mutateAsync:S,isLoading:I}=(()=>{const e=(0,p.gf)();return(0,u.useMutation)({mutationFn:async t=>{let[n,r]=t;return e.coupons.updateCoupon(n,y(r))}})})(),A=(0,u.useQueryClient)(),{showSuccessToast:D,showErrorToast:L}=(0,o.Ax)(),{generate:M}={generate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ABCDEFGHJKLMNPQRSTUVWXYZ23456789";const n=new Uint32Array(e);crypto.getRandomValues(n);let r="";for(let i=0;i<e;i++)r+=t[n[i]%t.length];return r}},{title:T,code:F,discount_type:U,discount:q,start_date:N,start_time:W,end_date:B,end_time:H,enable_end_date:G,product_type:Z,limit_enabled:X,user_limit_enabled:ee,items:te,isActive:ne,isExpired:re}=b.watch(),{currency_decimals:se,currency_thousands:le,decimals_num:oe,currency_symbol:ce}=null!==(t=null===(n=window.react_default_vars)||void 0===n?void 0:n.currency_info)&&void 0!==t?t:{},he=[h.SPECIFIC_BUNDLES,h.SPECIFIC_CATEGORIES,h.SPECIFIC_COURSES,h.SPECIFIC_MEMBERSHIP_PLANS],me=(0,l.useMemo)((()=>he.some((e=>e===Z))),[Z]),_e=async e=>{try{s?(await S([s,e]),A.invalidateQueries({queryKey:["coupon",s]}),D(__("Coupon updated successfully"))):(await w(e),D(__("Coupon created successfully"))),_(!1),A.invalidateQueries({queryKey:["coupons"]})}catch(e){L(e)}},Ce=e=>{b.setValue("items",te.filter((t=>{let{ID:n}=t;return n!==e})))};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(O.s,{p:"20px",pt:"52px",justify:"space-between",align:"center",borderBottom:"1px solid",borderColor:"border",position:"sticky",top:"0",bg:"white",zIndex:"99",children:[(0,E.jsx)(P.E,{fontSize:"24px",color:"dark",children:__(s?"Edit Coupon":"Create New Coupon")}),(0,E.jsxs)(O.s,{gap:"10px",children:[(0,E.jsx)(z.$,{m:"0",variant:"secondary-dark",onClick:()=>_(!0),children:__("Cancel")}),(0,E.jsx)(z.$,{m:"0",variant:"primary",isDisabled:g,isLoading:v||I,onClick:b.handleSubmit(_e,(e=>(0,xe.bv)(e,d.current))),children:__(s?"Update":"Create")})]})]}),(0,E.jsxs)(O.s,{flexDirection:"column",children:[(0,E.jsxs)(r.DG,{border:"0",children:[(0,E.jsx)(r.zs,{children:__("General Details")}),(0,E.jsx)(O.s,{gap:"20px",children:g?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(pe.z,{h:"40px",w:"full"}),(0,E.jsx)(pe.z,{h:"40px",w:"full"})]}):(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(Q.A_,{name:"title",label:__("Title"),placeholder:__("Enter Title")})})}),(0,E.jsxs)(O.s,{gap:"10px",children:[g?(0,E.jsx)(pe.z,{w:"full",h:"40px"}):(0,E.jsx)(Q.A_,{name:"code",label:__("Coupon Code"),placeholder:__("Enter the code or get a randomly generated")}),(0,E.jsx)(z.$,{m:"0",mt:"auto",variant:"primary",isDisabled:g,onClick:()=>{b.setValue("code",M(),{shouldValidate:!0})},children:__("Generate")})]}),(0,E.jsx)(O.s,{gap:"20px",children:g?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(pe.z,{h:"40px",w:"full"}),(0,E.jsx)(pe.z,{h:"40px",w:"full"})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(K,{name:"discount_type",label:__("Discount Type")}),U===C.AMOUNT?(0,E.jsx)(Q.oz,{name:"discount",label:__("Discount Value (".concat(ce,")")),decimalScale:oe,decimalSeparator:se,thousandSeparator:le}):(0,E.jsx)(Q.oz,{name:"discount",label:__("Discount Value (%)"),withButtons:!0,placeholder:__("0")})]})}),g?(0,E.jsx)(pe.z,{w:"full",h:"40px"}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)($,{name:"product_type",label:__("Apply Coupon to")}),me&&(0,E.jsxs)(E.Fragment,{children:[!!te.length&&(0,E.jsx)(O.s,{flexDirection:"column",children:te.map((e=>(0,E.jsx)(r.AA,{item:e,onDelete:Ce},e.ID)))}),(0,E.jsxs)(z.$,{m:"0",gap:"10px",alignItems:"center",variant:"primary",w:"fit-content",onClick:c,children:[(0,E.jsx)(k.I,{as:ue.h,w:"14px",h:"14px"}),(0,E.jsx)(P.E,{children:__("Add")})]})]})]}),(0,E.jsxs)(O.s,{py:"10px",px:"20px",height:"60px",gap:"10px",alignItems:"center",border:"1px solid",borderColor:ne?"primary":"border",background:ne?"primary10":"transparent",cursor:re?"not-allowed":"pointer",borderRadius:"8px",onClick:()=>{re||b.setValue("isActive",!ne)},children:[(0,E.jsx)(R.l,{m:"0",fontSize:"14px",fontWeight:"500",lineHeight:"normal",cursor:re?"not-allowed":"pointer",children:__("Status:")}),(0,E.jsxs)(O.s,{gap:"5px",alignItems:"center",children:[(0,E.jsx)(a.az,{onClick:e=>e.stopPropagation(),children:(0,E.jsx)(Q.by,{name:"isActive",m:"0",isDisabled:re})}),(0,E.jsx)(R.l,{m:"0",fontSize:"14px",fontWeight:"500",lineHeight:"normal",cursor:re?"not-allowed":"pointer",children:re?__("Expired"):f(ne?m.ACTIVE:m.INACTIVE)})]})]})]}),(0,E.jsxs)(r.DG,{pt:"0",border:"0",children:[(0,E.jsx)(r.zs,{children:__("Validity Period")}),(0,E.jsx)(O.s,{gap:"10px",children:g?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(pe.z,{w:"full",h:"40px"}),(0,E.jsx)(pe.z,{w:"full",h:"40px"})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Q.Lh,{name:"start_date",label:__("Start Date")}),(0,E.jsx)(Q.Kx,{name:"start_time",label:__("Start Time")})]})}),!g&&(0,E.jsx)(Q.by,{name:"enable_end_date",label:__("Set End Date")}),G&&(0,E.jsxs)(O.s,{gap:"10px",children:[(0,E.jsx)(Q.Lh,{name:"end_date",label:__("End Date")}),(0,E.jsx)(Q.Kx,{name:"end_time",label:__("End Time")})]})]}),(0,E.jsxs)(r.DG,{border:"0",pt:"0",children:[(0,E.jsx)(r.zs,{children:__("Usage Limits")}),g?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(pe.z,{h:"60px",w:"full"}),(0,E.jsx)(pe.z,{h:"60px",w:"full"})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(J,{name:"limit_enabled",title:__("Total Usage Limit"),inline:!0,hintText:__("Limit how many times this coupon can be used in total."),children:X&&(0,E.jsx)(Q.oz,{name:"usage_limit",withButtons:!0,placeholder:"0"})}),(0,E.jsx)(J,{name:"user_limit_enabled",title:__("Usage Limit Per User"),inline:!0,hintText:__("Limit how many times a single user can use this coupon"),children:ee&&(0,E.jsx)(Q.oz,{name:"user_usage_limit",withButtons:!0,placeholder:"0"})})]})]}),(0,E.jsxs)(r.DG,{pt:"0",children:[(0,E.jsx)(r.zs,{children:__("Minimum Purchase Requirements")}),g?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(pe.z,{h:"60px",w:"full"}),(0,E.jsx)(pe.z,{h:"60px",w:"full"}),(0,E.jsx)(pe.z,{h:"60px",w:"full"})]}):(0,E.jsx)(ie,{})]}),(0,E.jsxs)(r.DG,{border:"0",children:[(0,E.jsx)(r.zs,{children:__("Coupon Summary")}),(0,E.jsxs)(O.s,{borderY:"1px solid",borderColor:"border",py:"20px",gap:"40px",justify:"space-between",align:"center",children:[(0,E.jsx)(O.s,{flexDirection:"column",gap:"5px",children:g?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(pe.z,{h:"22px",w:"100px",fixedWidth:!0}),(0,E.jsx)(pe.z,{h:"19px",w:"180px",fixedWidth:!0})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(P.E,{fontSize:"18px",fontWeight:"600",color:"dark",children:T}),(0,E.jsxs)(P.E,{color:"dark",fontSize:"16px",children:[q&&(0,E.jsxs)(P.E,{as:"span",children:[U===C.AMOUNT?(0,E.jsx)(ae.x,{price:q,currencyInfo:null===(i=window.react_default_vars)||void 0===i?void 0:i.currency_info}):"".concat(q,"%")," ",__("off")]}),(0,E.jsxs)(P.E,{as:"span",textTransform:"lowercase",children:["\xa0",j(Z)]})]})]})}),(!!F||g)&&(0,E.jsxs)(O.s,{children:[(0,E.jsxs)(O.s,{p:"20px",bg:"primary10",borderRadius:"8px",position:"relative",align:"center",children:[g?(0,E.jsx)(pe.z,{h:"22px",w:"100px",fixedWidth:!0}):(0,E.jsx)(P.E,{fontSize:"18px",fontWeight:"700",letterSpacing:"0.9px",color:"primary",children:F}),(0,E.jsx)(k.I,{as:de,height:"40px",width:"4px",position:"absolute",right:"0"})]}),(0,E.jsx)(O.s,{bg:"primary10",w:"40px",h:"60px",borderRadius:"8px"})]})]}),(0,E.jsxs)(O.s,{justify:"space-between",children:[!!N&&(0,E.jsx)(P.E,{fontSize:"16px",color:"dark",children:(0,E.jsxs)(E.Fragment,{children:[__("Deal starts"),":"," ",(0,E.jsx)(P.E,{as:"span",fontWeight:"600",mr:"10px",children:(0,V.O)(new Date(N))}),W]})}),G&&!!B&&(0,E.jsx)(P.E,{fontSize:"16px",color:"dark",children:(0,E.jsxs)(E.Fragment,{children:[__("Deal ends"),":"," ",(0,E.jsx)(P.E,{as:"span",fontWeight:"600",mr:"10px",children:(0,V.O)(new Date(B))}),H]})})]}),(0,E.jsx)(a.az,{children:(0,E.jsx)(z.$,{m:"0",variant:"primary",isDisabled:v||I,isLoading:v||I,onClick:b.handleSubmit(_e),children:__(s?"Update":"Create")})})]})]})]})};var me=n(18403),_e=n(73467);const Ce=()=>{const{__:__}=(0,x.WD)(),e=__("This field is required");return _e.Ik().shape({title:_e.Yj().required(e),coupon_status:_e.Yj().required(e),code:_e.Yj().required(e),discount_type:_e.Yj().required(e),discount:_e.ai().nullable().min(1,__("Discount must be greater than 0")).required(e),product_type:_e.Yj().required(e),start_date:_e.ai().nullable(),start_time:_e.Yj().nullable(),enabled_end_date:_e.zM().nullable(),end_date:_e.ai().when("enabled_end_date",{is:!0,then:_e.ai().required(e),otherwise:_e.ai().nullable()}),end_time:_e.Yj().when("enabled_end_date",{is:!0,then:_e.Yj().required(e),otherwise:_e.Yj().nullable()}),limit_enabled:_e.zM(),usage_limit:_e.ai().when("limit_enabled",{is:!0,then:_e.ai().nullable().required(e),otherwise:_e.ai().nullable()}),user_limit_enabled:_e.zM(),user_usage_limit:_e.ai().when("user_limit_enabled",{is:!0,then:_e.ai().nullable().required(e),otherwise:_e.ai().nullable()}),min_requirements:_e.Yj().nullable(),min_purchase_amount:_e.ai().when("min_requirements",{is:"amount",then:_e.ai().nullable().required(e),otherwise:_e.ai().nullable()}),min_course_quantity:_e.ai().when("min_requirements",{is:"quantity",then:_e.ai().required(e),otherwise:_e.ai().nullable()})})};var ge=n(24670),je=n(32155);const fe={duration:.1,ease:"easeOut"},be=e=>{let{onClose:t,isOpen:n,editId:i}=e;const o=(0,l.useRef)(null),{isRtl:c}=(0,Z.Z)(),{__:__}=(0,x.WD)(),{isOpen:d,onOpen:u,onClose:p}=(0,s.j)(),m={enter:()=>({opacity:0,x:d?100:-100}),center:{opacity:1,x:0},exit:()=>({opacity:0,x:d?100:-100})},{data:_,isLoading:C}=v(i),g=(0,l.useRef)(!0),j=(0,l.useRef)(null);(0,l.useEffect)((()=>{g.current=!!i}),[i]);const f=(0,Y.mN)({defaultValues:w(),resolver:(0,me.t)(Ce())}),{product_type:b,items:y}=f.watch(),S=f.formState.isDirty;(0,l.useEffect)((()=>{g.current?g.current=!1:f.setValue("items",[])}),[b]),(0,l.useEffect)((()=>{p(),_?f.reset(_):f.reset(w())}),[_,n]);const I=function(){(arguments.length>0&&void 0!==arguments[0]&&!arguments[0]||!S||window.confirm(__("Unsaved data will be lost. Do you want to continue?")))&&t()};return(0,E.jsx)(a.az,{ref:o,children:(0,E.jsxs)(W._,{isOpen:n,onClose:I,placement:c?"left":"right",portalProps:{containerRef:o},children:[(0,E.jsx)(B.m,{onClick:()=>I()}),(0,E.jsx)(H.z,{bg:"white",maxWidth:"700px",children:(0,E.jsx)(G.c,{px:"0",pt:"0",ref:j,overflowX:"hidden",children:(0,E.jsx)(Y.Op,(0,D.A)((0,D.A)({},f),{},{children:(0,E.jsx)(ge.N,{mode:"wait",children:d?(0,E.jsx)(je.P.div,{variants:m,initial:"enter",animate:"center",exit:"exit",transition:fe,children:(0,E.jsx)(r.uL,{isOpen:d,onClose:p,onSave:e=>{f.setValue("items",e)},hideTabs:!0,selectedType:(()=>{switch(b){case h.SPECIFIC_BUNDLES:return"stm-course-bundles";case h.SPECIFIC_CATEGORIES:return"categories";case h.SPECIFIC_COURSES:return"stm-courses";case h.SPECIFIC_MEMBERSHIP_PLANS:return"membership-plans"}return"stm-courses"})(),selectedItems:y})},"products"):(0,E.jsx)(je.P.div,{variants:m,initial:"enter",animate:"center",exit:"exit",transition:fe,children:(0,E.jsx)(he,{drawerEl:j,isLoading:C,onProductsDrawerOpen:u,editId:i,onClose:I})},"coupons")})}))})})]})})};var ye=n(48894);const we=()=>(0,E.jsxs)(ye.Tr,{background:"white",children:[(0,E.jsx)(c.Us,{children:(0,E.jsx)(a.az,{w:"20px",children:(0,E.jsx)(pe.z,{w:"20px",h:"20px"})})}),(0,E.jsx)(c.Us,{children:(0,E.jsx)(pe.z,{w:"180px",h:"20px"})}),(0,E.jsx)(c.Us,{children:(0,E.jsx)(pe.z,{w:"120px",h:"14px"})}),(0,E.jsx)(c.Us,{children:(0,E.jsx)(pe.z,{w:"120px",h:"20px"})}),(0,E.jsx)(c.Us,{children:(0,E.jsx)(pe.z,{w:"120px",h:"20px"})}),(0,E.jsx)(c.Us,{children:(0,E.jsx)(pe.z,{w:"120px",h:"18px"})}),(0,E.jsx)(c.Us,{children:(0,E.jsx)(pe.z,{w:"100px",h:"20px"})}),(0,E.jsx)(c.Us,{children:(0,E.jsxs)(O.s,{flexDirection:"column",gap:"3px",children:[(0,E.jsx)(pe.z,{w:"110px",h:"18px"}),(0,E.jsx)(pe.z,{w:"120px",h:"18px"})]})}),(0,E.jsx)(c.Us,{children:(0,E.jsxs)(O.s,{flexDirection:"column",gap:"3px",children:[(0,E.jsx)(pe.z,{w:"110px",h:"18px"}),(0,E.jsx)(pe.z,{w:"120px",h:"18px"})]})}),(0,E.jsx)(c.Us,{children:(0,E.jsx)(pe.z,{w:"120px",h:"40px"})})]});var ve;const Ee=["title","titleId"];function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(null,arguments)}function Ie(e,t){let{title:n,titleId:r}=e,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,Ee);return l.createElement("svg",Se({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,ve||(ve=l.createElement("path",{d:"M23.25 9C23.4489 9 23.6397 8.92098 23.7803 8.78033C23.921 8.63968 24 8.44891 24 8.25V6.75C24 5.75544 23.6049 4.80161 22.9016 4.09835C22.1984 3.39509 21.2446 3 20.25 3H8.25V6C8.25 6.19891 8.17098 6.38968 8.03033 6.53033C7.88968 6.67098 7.69891 6.75 7.5 6.75C7.30109 6.75 7.11032 6.67098 6.96967 6.53033C6.82902 6.38968 6.75 6.19891 6.75 6V3H3.75C2.75544 3 1.80161 3.39509 1.09835 4.09835C0.395088 4.80161 0 5.75544 0 6.75L0 8.25C0 8.44891 0.0790176 8.63968 0.21967 8.78033C0.360322 8.92098 0.551088 9 0.75 9C1.54565 9 2.30871 9.31607 2.87132 9.87868C3.43393 10.4413 3.75 11.2044 3.75 12C3.75 12.7956 3.43393 13.5587 2.87132 14.1213C2.30871 14.6839 1.54565 15 0.75 15C0.551088 15 0.360322 15.079 0.21967 15.2197C0.0790176 15.3603 0 15.5511 0 15.75L0 17.25C0 18.2446 0.395088 19.1984 1.09835 19.9016C1.80161 20.6049 2.75544 21 3.75 21H6.75V18C6.75 17.8011 6.82902 17.6103 6.96967 17.4697C7.11032 17.329 7.30109 17.25 7.5 17.25C7.69891 17.25 7.88968 17.329 8.03033 17.4697C8.17098 17.6103 8.25 17.8011 8.25 18V21H20.25C21.2446 21 22.1984 20.6049 22.9016 19.9016C23.6049 19.1984 24 18.2446 24 17.25V15.75C24 15.5511 23.921 15.3603 23.7803 15.2197C23.6397 15.079 23.4489 15 23.25 15C22.4544 15 21.6913 14.6839 21.1287 14.1213C20.5661 13.5587 20.25 12.7956 20.25 12C20.25 11.2044 20.5661 10.4413 21.1287 9.87868C21.6913 9.31607 22.4544 9 23.25 9ZM8.25 15C8.25 15.1989 8.17098 15.3897 8.03033 15.5303C7.88968 15.671 7.69891 15.75 7.5 15.75C7.30109 15.75 7.11032 15.671 6.96967 15.5303C6.82902 15.3897 6.75 15.1989 6.75 15V13.5C6.75 13.3011 6.82902 13.1103 6.96967 12.9697C7.11032 12.829 7.30109 12.75 7.5 12.75C7.69891 12.75 7.88968 12.829 8.03033 12.9697C8.17098 13.1103 8.25 13.3011 8.25 13.5V15ZM8.25 10.5C8.25 10.6989 8.17098 10.8897 8.03033 11.0303C7.88968 11.171 7.69891 11.25 7.5 11.25C7.30109 11.25 7.11032 11.171 6.96967 11.0303C6.82902 10.8897 6.75 10.6989 6.75 10.5V9C6.75 8.80109 6.82902 8.61032 6.96967 8.46967C7.11032 8.32902 7.30109 8.25 7.5 8.25C7.69891 8.25 7.88968 8.32902 8.03033 8.46967C8.17098 8.61032 8.25 8.80109 8.25 9V10.5ZM12.75 9C12.8983 9 13.0433 9.04399 13.1667 9.1264C13.29 9.20881 13.3861 9.32594 13.4429 9.46299C13.4997 9.60003 13.5145 9.75083 13.4856 9.89632C13.4566 10.0418 13.3852 10.1754 13.2803 10.2803C13.1754 10.3852 13.0418 10.4567 12.8963 10.4856C12.7508 10.5145 12.6 10.4997 12.463 10.4429C12.3259 10.3861 12.2088 10.29 12.1264 10.1667C12.044 10.0433 12 9.89834 12 9.75C12 9.55109 12.079 9.36032 12.2197 9.21967C12.3603 9.07902 12.5511 9 12.75 9ZM16.5 15.75C16.3517 15.75 16.2067 15.706 16.0833 15.6236C15.96 15.5412 15.8639 15.4241 15.8071 15.287C15.7503 15.15 15.7355 14.9992 15.7644 14.8537C15.7934 14.7082 15.8648 14.5746 15.9697 14.4697C16.0746 14.3648 16.2082 14.2934 16.3537 14.2644C16.4992 14.2355 16.65 14.2503 16.787 14.3071C16.9241 14.3639 17.0412 14.46 17.1236 14.5833C17.206 14.7067 17.25 14.8517 17.25 15C17.25 15.1989 17.171 15.3897 17.0303 15.5303C16.8897 15.671 16.6989 15.75 16.5 15.75ZM17.7825 10.2825L12.5325 15.5325C12.3903 15.6719 12.1991 15.75 12 15.75C11.8009 15.75 11.6097 15.6719 11.4675 15.5325C11.327 15.3909 11.2481 15.1995 11.2481 15C11.2481 14.8005 11.327 14.6091 11.4675 14.4675L16.7175 9.2175C16.8587 9.07627 17.0503 8.99693 17.25 8.99693C17.4497 8.99693 17.6413 9.07627 17.7825 9.2175C17.9237 9.35873 18.0031 9.55027 18.0031 9.75C18.0031 9.94973 17.9237 10.1413 17.7825 10.2825Z",fill:"#227AFF"})))}const Ae=l.forwardRef(Ie),De=(n.p,()=>{var e,t,n,s;const{__:__}=(0,i.WD)(),[h,_]=(0,l.useState)(null),C=(()=>{const{__:__}=(0,x.WD)();return[{id:"delete",label:__("Delete")},{id:"update_status_active",label:__("Change status to active")},{id:"update_status_inactive",label:__("Change status to inactive")}]})(),{mutateAsync:g,isLoading:b}=(()=>{const e=(0,p.gf)();return(0,u.useMutation)({mutationFn:async t=>{let[n,r]=t;return e.coupons.updateCouponStatus(n,r)}})})(),{page:y,setPage:w,perPage:v,setPerPage:S,total:I,search:q,setSearch:W,status:B,setStatus:H,setDateRange:G,selectedRows:Y,setSelectedRows:Z,sort:Q,onSort:K,query:$,isDetailsOpen:X,onDetailsClose:J,onDetailsOpen:ee}=A(),{onCopy:te,onUnsetCopied:ne,isCopied:re,isCopiedError:ie}=(0,o.T9)(),{showErrorToast:se}=(0,o.Ax)(),ae=(0,u.useQueryClient)(),le=e=>{w(1),Z([]),e()},oe=e=>(0,V.k)(new Date(e));(0,l.useEffect)((()=>{Z([])}),[y]);const ce=[{label:__("Name"),key:"title",width:"180px",rowRenderer:e=>(0,E.jsx)(P.E,{fontWeight:"700",children:e.title})},{label:__("Code"),key:"code",rowRenderer:(e,t)=>{let{tdContainer:n}=t;return(0,E.jsxs)(O.s,{gap:"5px",align:"center",color:"dark70",children:[(0,E.jsx)(P.E,{fontWeight:"500",fontSize:"15px",lineHeight:"normal",children:e.code}),(0,E.jsx)(L.m,{placement:"top",portalProps:{containerRef:n},closeOnClick:!1,label:(0,E.jsx)(O.s,{flexDirection:"column",gap:"4px",children:__(re?ie?"Unable to copy a code":"Copied to clipboard!":"Copy")}),children:(0,E.jsx)(k.I,{as:F.h,_hover:{color:"primary"},onMouseLeave:ne,onClick:t=>{t.stopPropagation(),te(e.code)}})})]})}},{label:__("Applies to"),key:"product_type",width:"120px",rowRenderer:e=>(0,E.jsx)(P.E,{color:"dark70",children:j(e.product_type)})},{label:__("Discount"),key:"discount_formatted",width:"120px"},{label:__("Status"),key:"coupon_status",width:"120px",isSortable:!0,rowRenderer:e=>{let{id:t,coupon_status:n,is_expired:r}=e;return(0,E.jsxs)(O.s,{alignItems:"center",onClick:e=>e.stopPropagation(),children:[(0,E.jsx)(M.d,{isChecked:n===m.ACTIVE,isDisabled:r||b,onChange:e=>(async(e,t)=>{try{await g([e,t?m.ACTIVE:m.INACTIVE]),ae.setQueriesData({queryKey:["coupons"]},(t=>{if(!t)return t;const n=(Array.isArray(t)?t:t.data).map((t=>t.id===e?(0,D.A)((0,D.A)({},t),{},{coupon_status:t.coupon_status===m.ACTIVE?m.INACTIVE:m.ACTIVE}):t));return Array.isArray(t)?n:(0,D.A)((0,D.A)({},t),{},{data:n})}))}catch(e){console.error(e),se(e)}})(t,e.target.checked),p:"0",id:"status_".concat(t)}),(0,E.jsx)(R.l,{minW:"48px",fontSize:"14px",cursor:"pointer",fontWeight:"500",m:"0",lineHeight:"normal",htmlFor:"status_".concat(t),children:r?__("Expired"):f(n)})]})}},{label:__("Uses"),key:"used_count",width:"100px",isSortable:!0,rowRenderer:e=>{var t,n;let{used_count:r,usage_limit:i,id:s,code:a}=e,l=null!==(t=null===(n=window.react_default_vars)||void 0===n?void 0:n.admin_url)&&void 0!==t?t:"";return l+="admin.php?page=manage_orders",l+="&coupon_id=".concat(s,"&coupon_name=").concat(a,"&hide_coupon_filter=true&back_url=").concat(window.location.href),(0,E.jsx)(P.E,{onClick:e=>e.stopPropagation(),as:"a",href:l,color:"primary",textDecoration:"underline",fontWeight:"500",children:"".concat(r).concat(i?"/"+i:"")})}},{label:__("Start Date"),key:"start_date",width:"100px",isSortable:!0,rowRenderer:e=>{let{start_date:t,start_time:n}=e;return(0,E.jsxs)(O.s,{flexDirection:"column",children:[(0,E.jsx)(P.E,{fontWeight:"600",color:"dark70",children:oe(t).date}),(0,E.jsx)(P.E,{fontWeight:"400",color:"dark70",children:null!==n&&void 0!==n?n:"00:00"})]})}},{label:__("End Date"),key:"end_date",width:"130px",isSortable:!0,rowRenderer:e=>{let{end_date:t,end_time:n}=e;return(0,E.jsx)(O.s,{flexDirection:"column",children:t?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(P.E,{fontWeight:"600",color:"dark70",children:oe(t).date}),(0,E.jsx)(P.E,{fontWeight:"400",color:"dark70",children:null!==n&&void 0!==n?n:"00:00"})]}):"-"})}},{label:__("Actions"),key:"actions",width:"1%",rowRenderer:()=>(0,E.jsx)(z.$,{variant:"defaultLight",m:"0",children:__("Edit")})}];return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(r.Qn,{allTimeEndDate:null,selectedItems:Y,setSelectedItems:Z,getItemId:e=>e.id.toString(),totalItems:I,dataItems:null!==(e=null===(t=$.data)||void 0===t?void 0:t.data)&&void 0!==e?e:[],bulkActions:C,useBulkAction:U,onDateRangeChange:(e,t)=>G((0,d.uo)(e,t)),bulkActionGuard:{delete:__("Are you sure you want to delete these coupons?")},datePickerLocalStorageKey:"orders",children:[(0,E.jsx)(a.az,{maxW:"180px",w:"100%",children:(0,E.jsx)(N,{onChange:e=>le((()=>H(e))),value:B,includeAll:!0})}),(0,E.jsx)(a.az,{maxW:"170px",w:"100%",children:(0,E.jsx)(T.p,{placeholder:__("Search by name"),variant:"msVariant",value:q,onChange:e=>le((()=>W(e.target.value)))})})]}),(0,E.jsx)(c.bQ,{headers:ce,data:null!==(n=null===(s=$.data)||void 0===s?void 0:s.data)&&void 0!==n?n:[],selectedItems:Y,page:y,total:I,perPage:v,isLoading:$.isLoading||$.isRefetching,onPageChange:w,onSelectItem:e=>{return t=e.id.toString(),void(Y.includes(t)?Z(Y.filter((e=>e!==t))):Z([...Y,t]));var t},onRowClick:e=>{return t=e.id,_(t),void ee();var t},onPerPageChange:e=>le((()=>S(e))),sort:Q,onSort:K,SkeletonCells:(0,E.jsx)(we,{}),noItemsTitle:__("No Coupon yet"),noItemsSubTitle:__("All your Coupon will be displayed here"),noItemsIcon:(0,E.jsx)(Ae,{})}),(0,E.jsx)(be,{editId:h,isOpen:X,onClose:()=>{_(null),J()}})]})}),Pe=()=>{const{__:__}=(0,i.WD)(),{onDetailsOpen:e}=A();return(0,E.jsx)(r.HT,{title:__("Coupons"),button:(0,E.jsxs)(z.$,{m:"0",gap:"10px",alignItems:"center",variant:"primary",w:"fit-content",onClick:e,children:[(0,E.jsx)(k.I,{as:ue.h,w:"14px",h:"14px"}),(0,E.jsx)(P.E,{children:__("Add New")})]}),children:(0,E.jsx)(De,{})})},Oe=()=>(0,E.jsx)(I,{children:(0,E.jsx)(Pe,{})})}}]);
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[926],{7297:(e,s,n)=>{n.d(s,{v:()=>o});var r=n(31590),t=n(70579);const o=e=>{let{text:s,color:n}=e;return(0,t.jsx)(r.az,{bg:n,color:"white",px:"5px",py:"3px",borderRadius:"4px",fontSize:"10px",lineHeight:"normal",textAlign:"center",fontWeight:"bold",w:"fit-content",textTransform:"uppercase",textShadow:"1px 1px rgba(0, 0, 0, 0.1)",children:s})}},82192:(e,s,n)=>{n.d(s,{v:()=>x});var r=n(89379),t=n(65043),o=n(61667),i=n(42703),d=n(54765),l=n(57076),a=n(70579);const c=e=>{const{__:__}=(0,o.WD)();return(0,a.jsxs)(l.c.SingleValue,(0,r.A)((0,r.A)({},e),{},{children:[__("Status:")," ",e.data.label]}))},x=e=>{let{onChange:s,value:n,includeAll:r,isSelectField:l,name:x,options:u,label:p}=e;const{__:__}=(0,o.WD)(),h=(0,t.useMemo)((()=>{const e=[];return r&&e.push({id:"all",label:__("All")}),e.push(...u),e}),[]);return l&&x?(0,a.jsx)(d.zM,{label:p,name:x,options:h}):(0,a.jsx)(i.l,{placeholder:__("Status"),options:h,value:n,onChange:e=>null===s||void 0===s?void 0:s(e),components:{SingleValue:c}})}},95426:(e,s,n)=>{n.d(s,{O:()=>d,k:()=>l});var r=n(63147),t=n(24653),o=n(23086);const i={d:"dd",j:"d",m:"MM",n:"M",F:"MMMM",M:"MMM",Y:"yyyy",y:"yy"},d=e=>{const s=window.lmsApiSettings.wp_date_format||"dd.MM.yyyy";if(!(0,r.f)(e))return"";const n=s.replace(/[djmnyYFM]/g,(e=>i[e]||e));const d=(0,t.H)(e.toISOString());return(0,o.GP)(d,n)},l=(e,s)=>{const n=e instanceof Date?e:new Date(1e3*e);return{date:d(n),time:n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",timeZone:s})}}},64926:(e,s,n)=>{n.r(s),n.d(s,{StatusChip:()=>b,default:()=>ie});var r=n(59579),t=n(3898),o=n(89379),i=n(66464),d=n(34688),l=n(99887),a=n(31590),c=n(82597),x=n(95716),u=n(53536),p=n(61667);const h=e=>{switch(e){case"pending":return"warning";case"completed":case"paid":return"success";default:return"gray"}},j=()=>{const{__:__}=(0,p.TO)();return[{label:__("Pending"),id:"pending"},{label:__("Completed"),id:"completed"},{label:__("Cancelled"),id:"cancelled"}]},v=e=>{const{__:__}=(0,p.TO)();switch(e){case"stripe":return"Stripe";case"paypal":return"PayPal";case"manual":return"Manual";case"bank_transfer":return __("Bank Transfer");case"cash":return __("Cash");case"credit_card":return __("Credit Card");case"wire_transfer":return __("Wire Transfer");default:return(0,u.capitalize)(e)}},m=(e,s)=>{var n,r;return s&&e&&null!==(n=null===(r=e.find((e=>e.code===s)))||void 0===r?void 0:r.name)&&void 0!==n?n:s},g=(e,s,n)=>{var r,t;if(!s||!n||!e)return n;const o=e[s];return o&&null!==(r=null===(t=o.find((e=>e.code===n)))||void 0===t?void 0:t.name)&&void 0!==r?r:n};var _=n(7297),w=n(70579);const b=e=>{let{status:s}=e;return(0,w.jsx)(_.v,{text:s,color:h(s)})};var f=n(65043),y=n(79478),z=n(82256),S=n(79060),C=n(31001),k=n(82907),E=n(51585);const D=(0,f.createContext)(null),W=e=>{let{children:s}=e;const{page:n,perPage:r}=(0,z.pH)(),{coupon_id:t}=(0,C.a)(["coupon_id"]),[o,i]=(0,f.useState)(n||1),[d,l]=(0,f.useState)(r||10),[c,x]=(0,f.useState)(""),[u,p]=(0,f.useState)("all"),[h,j]=(0,f.useState)((0,S.Fw)("orders")),[v,m]=(0,f.useState)([]),{sort:g,onSort:_}=(0,z.y8)(),[b,W]=(0,f.useState)(0),[I,O]=(0,f.useState)(t),P=((e,s,n,r,t,o,i,d)=>{const l=(0,E.gf)();return(0,k.useQuery)({queryKey:["orders",e,s,n,r,t,o,i],queryFn:async()=>{const a="all"===r?"":r,c=await l.orders.getOrders(e,s,n,a,t,o,i);return null===d||void 0===d||d(c),c}})})(o,d,(0,y.d7)(c,500),u,h,g,I);return(0,f.useEffect)((()=>{P.data&&W(P.data.total_orders)}),[P.data]),(0,w.jsx)(D.Provider,{value:{page:o,setPage:i,perPage:d,setPerPage:l,search:c,setSearch:x,status:u,setStatus:p,ordersQuery:P,total:b,setDateRange:j,selectedOrders:v,setSelectedOrders:m,sort:g,onSort:_,couponId:I,setCouponId:O},children:P.error?(0,w.jsx)(a.az,{children:"Error"}):s})},I=()=>{const e=(0,E.gf)(),s=(0,k.useQueryClient)();return(0,k.useMutation)({mutationFn:async s=>e.orders.bulkAction({action:s.action,orders:s.items}),onSuccess:()=>{s.invalidateQueries({queryKey:["orders"]})}})};var O=n(48894),P=n(21989),A=n(19316);const R=()=>{var e,s,n;const r=null!==(e=null===(s=window.react_orders)||void 0===s?void 0:s.taxes_info.taxes_enabled)&&void 0!==e&&e,t="1"===(null===(n=window.react_orders)||void 0===n?void 0:n.is_coupons_enabled);return(0,w.jsxs)(O.Tr,{background:"white",children:[(0,w.jsx)(z.Us,{children:(0,w.jsx)(A.z,{fixedWidth:!0,w:"20px",h:"20px"})}),(0,w.jsx)(z.Us,{children:(0,w.jsx)(A.z,{w:"50px",h:"20px"})}),(0,w.jsx)(z.Us,{children:(0,w.jsx)(A.z,{w:"120px",h:"20px"})}),(r||t)&&(0,w.jsx)(z.Us,{children:(0,w.jsx)(A.z,{w:"70px",h:"20px"})}),t&&(0,w.jsx)(z.Us,{children:(0,w.jsx)(A.z,{w:"70px",h:"20px"})}),r&&(0,w.jsx)(z.Us,{children:(0,w.jsx)(A.z,{w:"70px",h:"20px"})}),(0,w.jsx)(z.Us,{children:(0,w.jsx)(A.z,{w:"70px",h:"20px"})}),(0,w.jsx)(z.Us,{children:(0,w.jsx)(A.z,{w:"50px",h:"20px"})}),(0,w.jsx)(z.Us,{children:(0,w.jsxs)(P.s,{gap:"2px",flexDirection:"column",children:[(0,w.jsx)(A.z,{w:"80px",h:"18px"}),(0,w.jsx)(A.z,{w:"40px",h:"18px"})]})}),(0,w.jsx)(z.Us,{children:(0,w.jsx)(A.z,{w:"55px",h:"20px"})}),(0,w.jsx)(z.Us,{children:(0,w.jsx)(A.z,{w:"63px",h:"40px"})})]})};var M=n(32172),T=n(63754),F=n(61120),L=n(13585),U=n(24943),Q=n(74673),B=n(82192);const G=e=>(0,w.jsx)(B.v,(0,o.A)((0,o.A)({},e),{},{options:j()}));var N=n(94223),q=n(61278),$=n(5994),K=n(56159),H=n(77482);const Y=e=>{let{item:s}=e;const{__:__}=(0,p.WD)();return(0,w.jsxs)(t.mc,{py:"10px",px:"10px",h:"100%",overflow:"hidden",cursor:"pointer",transition:"all 0.2s",_hover:{bg:"rgb(245, 245, 245, 0.5)"},onClick:()=>window.open(s.link,"_blank"),children:[(0,w.jsxs)(P.s,{alignItems:"center",gap:"20px",overflow:"hidden",children:[s.image_url?(0,w.jsx)(K._,{w:"100px",h:"56px",style:{aspectRatio:"25/14"},src:s.image_url,borderRadius:"8px"}):(0,w.jsx)(a.az,{h:"56px"}),(0,w.jsxs)(a.az,{minW:"0",children:[(0,w.jsxs)(P.s,{alignItems:"center",gap:"5px",children:[(0,w.jsx)(d.E,{fontSize:"18px",fontWeight:"600",isTruncated:!0,children:s.title}),s.subscription_type&&(0,w.jsx)(t.vu,{textTransform:"uppercase",children:"subscription"===s.subscription_type?__("Subscription"):__("Membership")}),s.bundle&&(0,w.jsx)(t.vu,{textTransform:"uppercase",children:__("Bundle")}),s.enterprise&&(0,w.jsx)(t.vu,{textTransform:"uppercase",children:__("Enterprise")})]}),s.bundle&&(0,w.jsxs)(d.E,{fontSize:"16px",fontWeight:"500",opacity:"0.7",mt:"5px",children:[s.bundle_courses_count," ",__("courses in bundle")]}),s.enterprise_name&&(0,w.jsxs)(d.E,{fontSize:"16px",fontWeight:"500",opacity:"0.7",mt:"5px",children:[__("for group")," ",null===s||void 0===s?void 0:s.enterprise_name]})]})]}),(0,w.jsx)(d.E,{ml:"auto",fontSize:"16px",fontWeight:"700",children:(0,w.jsx)(H.x,{price:s.price})})]})};var V=n(95426),Z=n(38808),J=n(26213);const X=e=>{let{el:s,label:n,isOrderNotLoading:r}=e;return(0,w.jsx)(P.s,{borderBottom:"1px solid",borderColor:"border",py:"10px",justifyContent:"flex-end",fontSize:"18px",fontWeight:"600",color:"dark",children:r?(0,w.jsxs)(d.E,{children:[n,": ",s]}):(0,w.jsx)(A.z,{w:"100px",h:"20px"})})},ee=e=>{var s,n,r,o,i;let{orderId:c,isOpen:u,onClose:h}=e;const{__:__}=(0,p.WD)(),{data:j,isLoading:_}=(e=>{const s=(0,E.gf)();return(0,k.useQuery)({queryKey:["order",e],enabled:!!e,queryFn:async()=>await s.orders.getOrder(e)})})(c),y=(0,f.useRef)(null),[z,S]=(0,f.useState)(!1),[C,D]=(0,f.useState)("pending"),[W,I]=(0,f.useState)(""),O=(0,k.useQueryClient)(),{isRtl:R}=(0,Z.Z)(),{taxes_info:B}=window.react_orders||{},{mutateAsync:K,isLoading:ee}=(e=>{const s=(0,E.gf)();return(0,k.useMutation)({mutationFn:async n=>s.orders.updateOrder(e,n)})})(c),se=(null===B||void 0===B?void 0:B.taxes_enabled)&&!(null===j||void 0===j||!j.taxes)&&0!==(0,J.dD)(j.taxes),ne=!_&&!!j,re=!ne||ee||C===(null===j||void 0===j?void 0:j.status),{regions:te,countries:oe}=window.react_orders||{};(0,f.useEffect)((()=>{j&&(D(j.status),I(j.order_note||""))}),[j]),(0,f.useEffect)((()=>{u&&_&&(S(!1),I(""))}),[u]);const ie=async()=>{if(C!==(null===j||void 0===j?void 0:j.status)||W!==(null===j||void 0===j?void 0:j.order_note))try{await K({status:C,note:W}),O.invalidateQueries({queryKey:["orders"]}),O.invalidateQueries({queryKey:["order",c]}),S(!1)}catch(e){console.error(e)}};return(0,w.jsx)(a.az,{ref:y,children:(0,w.jsxs)(M._,{isOpen:u,onClose:h,placement:R?"left":"right",portalProps:{containerRef:y},children:[(0,w.jsx)(T.m,{onClick:h}),(0,w.jsx)(F.z,{bg:"white",maxWidth:"660px",children:(0,w.jsx)(L.c,{px:"0",pt:"0",children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(P.s,{px:"20px",pt:"52px",pb:"20px",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"border",position:"sticky",top:"0",bg:"white",zIndex:"1",children:[(0,w.jsxs)(P.s,{gap:"20px",alignItems:"center",children:[(0,w.jsx)(l.$,{variant:"defaultLight",m:"0",w:"40px",h:"40px",onClick:h,children:(0,w.jsx)(x.I,{as:Q.h})}),ne?(0,w.jsxs)(d.E,{fontSize:"24px",fontWeight:"medium",color:"dark",children:[__("Order")," #",j.id," ",__("Details")]}):(0,w.jsx)(A.z,{w:"210px",h:"32px"})]}),(0,w.jsxs)(P.s,{gap:"10px",children:[(0,w.jsx)(a.az,{w:"100%",maxW:"180px",children:ne?(0,w.jsx)(G,{onChange:D,value:C,includeAll:!1}):(0,w.jsx)(A.z,{w:"180px",h:"40px"})}),(0,w.jsx)(l.$,{m:"0",variant:"primary",disabled:re,isLoading:ee,onClick:ie,children:__("Save")})]})]}),(0,w.jsxs)(P.s,{flexDirection:"column",children:[(0,w.jsxs)(t.DG,{children:[(0,w.jsx)(t.zs,{children:__("Payment info")}),(0,w.jsxs)(t.Y3,{children:[(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Payment method"),":"]}),ne?(0,w.jsx)(t.nv,{children:v(j.payment_code)}):(0,w.jsx)(A.z,{w:"80px",h:"20px"})]}),(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Date"),":"]}),ne?(0,w.jsxs)(t.nv,{children:[(0,V.k)(j.date).date," ",(0,V.k)(j.date).time]}):(0,w.jsx)(A.z,{w:"120px",h:"20px"})]}),(null===B||void 0===B?void 0:B.taxes_enabled)&&(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Subtotal"),":"]}),ne?(0,w.jsx)(t.nv,{children:(0,w.jsx)(H.x,{price:j.subtotal})}):(0,w.jsx)(A.z,{w:"40px",h:"20px"})]}),(null===B||void 0===B?void 0:B.taxes_enabled)&&(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Tax"),":"]}),ne?(0,w.jsx)(t.nv,{children:(0,w.jsx)(H.x,{price:j.taxes})}):(0,w.jsx)(A.z,{w:"40px",h:"20px"})]}),"1"===(null===(s=window.react_orders)||void 0===s?void 0:s.is_coupons_enabled)&&!(null===j||void 0===j||!j.coupon_value)&&(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Coupon Applied"),":"]}),ne?(0,w.jsx)(t.nv,{children:"".concat(null===(n=j.coupon_data)||void 0===n?void 0:n.code," (").concat(j.coupon_value," ").concat(__("OFF"),")")}):(0,w.jsx)(A.z,{w:"40px",h:"20px"})]}),(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Total"),":"]}),ne?(0,w.jsx)(t.nv,{children:(0,w.jsx)(H.x,{price:j.total})}):(0,w.jsx)(A.z,{w:"60px",h:"20px"})]}),(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Status"),":"]}),ne?(0,w.jsx)(b,{status:j.status}):(0,w.jsx)(A.z,{w:"80px",h:"20px"})]}),(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Order ID"),":"]}),ne?(0,w.jsxs)(t.nv,{children:["#",j.id]}):(0,w.jsx)(A.z,{w:"190px",h:"20px"})]}),(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Order key"),":"]}),ne?(0,w.jsx)(t.nv,{children:j.order_key}):(0,w.jsx)(A.z,{w:"190px",h:"20px"})]})]})]}),(0,w.jsxs)(t.DG,{children:[(0,w.jsx)(t.zs,{children:__("Student details")}),(0,w.jsxs)(t.Y3,{children:[(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Name"),":"]}),ne?(0,w.jsx)(t.nv,{children:j.user.login}):(0,w.jsx)(A.z,{w:"120px",h:"20px"})]}),(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Email"),":"]}),ne?(0,w.jsx)(t.nv,{children:j.user.email}):(0,w.jsx)(A.z,{w:"140px",h:"20px"})]}),(null===B||void 0===B?void 0:B.country)&&(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Country"),":"]}),ne?(0,w.jsx)(t.nv,{children:m(oe,j.personal_data.country)}):(0,w.jsx)(A.z,{w:"120px",h:"20px"})]}),(null===B||void 0===B?void 0:B.post_code)&&(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Post Code"),":"]}),ne?(0,w.jsx)(t.nv,{children:j.personal_data.post_code}):(0,w.jsx)(A.z,{w:"90px",h:"20px"})]}),(null===B||void 0===B?void 0:B.state)&&(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("State"),":"]}),ne?(0,w.jsx)(t.nv,{children:g(te,j.personal_data.country,j.personal_data.state)}):(0,w.jsx)(A.z,{w:"130px",h:"20px"})]}),(null===B||void 0===B?void 0:B.city)&&(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Town/City"),":"]}),ne?(0,w.jsx)(t.nv,{children:j.personal_data.city}):(0,w.jsx)(A.z,{w:"130px",h:"20px"})]}),(null===B||void 0===B?void 0:B.company)&&(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Company Name"),":"]}),ne?(0,w.jsx)(t.nv,{children:j.personal_data.company}):(0,w.jsx)(A.z,{w:"140px",h:"20px"})]}),(null===B||void 0===B?void 0:B.phone)&&(0,w.jsxs)(t.mc,{children:[(0,w.jsxs)(d.E,{children:[__("Phone Number"),":"]}),ne?(0,w.jsx)(t.nv,{children:j.personal_data.phone}):(0,w.jsx)(A.z,{w:"120px",h:"20px"})]})]})]}),(0,w.jsxs)(t.DG,{children:[(0,w.jsx)(t.zs,{children:__("Order note")}),(0,w.jsx)(a.az,{position:"relative",pb:"20px",children:ne?(0,w.jsxs)(w.Fragment,{children:[z?(0,w.jsx)(U.T,{fontSize:"16px",fontWeight:"500",color:"dark70",w:"100%",border:"1px solid",borderColor:"border",borderRadius:"4px",value:W,onChange:e=>I(e.target.value),p:"10px"}):(0,w.jsx)(d.E,{fontSize:"16px",fontWeight:"500",color:"dark70",whiteSpace:"pre-line",children:W||__("Add note")}),(0,w.jsx)(P.s,{position:"absolute",bottom:z?"-20px":"0",right:"0",gap:"5px",children:z?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.$,{variant:"defaultLight",m:"0",w:"30px",h:"30px",p:"0",isDisabled:ee,onClick:()=>{S(!1),I((null===j||void 0===j?void 0:j.order_note)||"")},children:(0,w.jsx)(x.I,{as:$.h})}),(0,w.jsx)(l.$,{variant:"primary",m:"0",w:"30px",h:"30px",p:"0",isDisabled:ee||W===(null===j||void 0===j?void 0:j.order_note),isLoading:ee,onClick:()=>ie(),children:(0,w.jsx)(x.I,{as:q.h})})]}):(0,w.jsx)(l.$,{variant:"primary",m:"0",w:"30px",h:"30px",p:"0",onClick:()=>S(!0),children:(0,w.jsx)(x.I,{as:N.h})})})]}):(0,w.jsxs)(P.s,{gap:"5px",flexDirection:"column",children:[(0,w.jsx)(A.z,{w:"100%",h:"20px"}),(0,w.jsx)(A.z,{w:"200px",h:"20px"})]})})]}),(0,w.jsxs)(t.DG,{borderBottom:"none",children:[(0,w.jsx)(t.zs,{children:__("Order details")}),(0,w.jsxs)(t.Y3,{children:[ne?(0,w.jsx)(w.Fragment,{children:j.cart_items.map((e=>{var s;return(0,w.jsx)(Y,{item:e},null!==(s=e.item_id)&&void 0!==s?s:e.bundle_id)}))}):(0,w.jsx)(w.Fragment,{children:Array.from({length:3}).map(((e,s)=>(0,w.jsxs)(t.mc,{gap:"20px",alignItems:"center",py:"10px",h:"100%",children:[(0,w.jsx)(A.z,{w:"100px",h:"56px"}),(0,w.jsx)(A.z,{w:"200px",h:"20px"}),(0,w.jsx)(A.z,{ml:"auto",w:"60px",h:"20px"})]},s)))}),(0,w.jsx)(a.az,{borderTop:"1px solid",borderColor:"border"}),(se||(null===(r=window.react_orders)||void 0===r?void 0:r.is_coupons_enabled)&&!(null===j||void 0===j||!j.coupon_value))&&(0,w.jsx)(X,{isOrderNotLoading:ne,label:__("Subtotal"),el:(0,w.jsx)(H.x,{price:j.subtotal})}),se&&(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(X,{isOrderNotLoading:ne,label:__("Taxes"),el:(0,w.jsx)(H.x,{price:j.taxes})})}),"1"===(null===(o=window.react_orders)||void 0===o?void 0:o.is_coupons_enabled)&&!(null===j||void 0===j||!j.coupon_value)&&(0,w.jsx)(X,{isOrderNotLoading:ne,label:__("Coupon"),el:(0,w.jsxs)(d.E,{as:"span",children:[null!==j&&void 0!==j&&j.coupon_value.endsWith("%")?"(".concat(j.coupon_value,") "):"",(0,w.jsx)(H.x,{price:(()=>{if(null===j||void 0===j||!j.coupon_data||null===j||void 0===j||!j.coupon_type||null===j||void 0===j||!j.original_coupon_value)return;const e=(0,J.dD)((null===j||void 0===j?void 0:j.subtotal)||(null===j||void 0===j?void 0:j.total)||0),s=(0,J.dD)(j.original_coupon_value);return(0,J.cU)(e,s,j.coupon_type)})()||0})]})}),(0,w.jsx)(X,{isOrderNotLoading:ne,label:__("Total"),el:(0,w.jsx)(H.x,{price:null!==(i=null===j||void 0===j?void 0:j.total)&&void 0!==i?i:null})})]})]})]})]})})})]})})};var se=n(41262),ne=n(54765);const re=()=>{var e,s,n,u,h,j,m,g;const{__:__}=(0,r.WD)(),[_,y]=(0,f.useState)(null),k=(()=>{const{__:__}=(0,p.WD)();return[{id:"delete",label:__("Delete")},{id:"update_status_completed",label:__("Change status to completed")},{id:"update_status_pending",label:__("Change status to pending")},{id:"update_status_cancelled",label:__("Change status to cancelled")}]})(),{page:E,setPage:W,perPage:O,setPerPage:P,ordersQuery:A,total:M,search:T,setSearch:F,status:L,setStatus:U,setDateRange:Q,selectedOrders:B,setSelectedOrders:N,sort:q,onSort:$,setCouponId:K,couponId:Y}=(()=>{const e=(0,f.useContext)(D);if(!e)throw new Error("useOrdersContext must be used within an OrdersProvider");return e})(),{isOpen:Z,onOpen:J,onClose:X}=(0,i.j)(),{hide_coupon_filter:re}=(0,C.a)(["hide_coupon_filter"]),te=e=>{W(1),N([]),e()},oe=e=>(0,V.k)(e);(0,f.useEffect)((()=>{N([])}),[E]);const ie=[{label:__("ID"),key:"id",width:"100px",isSortable:!0,rowRenderer:e=>(0,w.jsxs)(d.E,{children:["#",e.id]})},{label:__("User"),key:"user"},{label:__("Subtotal"),key:"subtotal",width:"120px",condition:null!==(e=(null===(s=window.react_orders)||void 0===s?void 0:s.taxes_info.taxes_enabled)||"1"===(null===(n=window.react_orders)||void 0===n?void 0:n.is_coupons_enabled))&&void 0!==e&&e,rowRenderer:e=>(0,w.jsx)(H.x,{price:e.subtotal})},{label:__("Coupon"),key:"coupon_value",width:"120px",condition:"1"===(null===(u=window.react_orders)||void 0===u?void 0:u.is_coupons_enabled),rowRenderer:e=>{var s;return(0,w.jsx)(d.E,{children:null!==(s=e.coupon_value)&&void 0!==s?s:"-"})}},{label:__("Tax"),key:"taxes",width:"120px",condition:null!==(h=null===(j=window.react_orders)||void 0===j?void 0:j.taxes_info.taxes_enabled)&&void 0!==h&&h,rowRenderer:e=>(0,w.jsx)(H.x,{price:e.taxes})},{label:__("Total"),key:"amount",width:"120px",rowRenderer:e=>(0,w.jsx)(H.x,{price:e.total})},{label:__("Method"),key:"method",width:"180px",rowRenderer:e=>(0,w.jsx)(d.E,{children:v(e.method)})},{label:__("Date"),key:"date",width:"100px",rowRenderer:e=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.E,{children:oe(e.date).date}),(0,w.jsx)(d.E,{children:oe(e.date).time})]})},{label:__("Status"),key:"status",width:"130px",isSortable:!0,rowRenderer:e=>(0,w.jsx)(b,{status:e.status})},{label:__("Actions"),key:"actions",width:"1%",rowRenderer:()=>(0,w.jsx)(l.$,{variant:"defaultLight",m:"0",children:__("Edit")})}],de=e=>{y(e),J()};return(0,f.useEffect)((()=>{const{order_id:e}=(0,C.a)(["order_id"]);e&&de(e)}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(t.Qn,{selectedItems:B,setSelectedItems:N,getItemId:e=>e.id,totalItems:M,dataItems:(null===(m=A.data)||void 0===m?void 0:m.orders)||[],onDateRangeChange:(e,s)=>Q((0,S.uo)(e,s)),bulkActions:k,useBulkAction:I,bulkActionGuard:{delete:__("Are you sure you want to delete these orders?")},datePickerLocalStorageKey:"orders",onBeforeBulkAction:e=>{const s=e.action;e.action.startsWith("update_status")&&(e.action="update_status",e.items=e.items.map((e=>{let n=e.status;switch(s){case"update_status_completed":n="completed";break;case"update_status_cancelled":n="cancelled";break;case"update_status_pending":n="pending"}return(0,o.A)((0,o.A)({},e),{},{status:n})})))},children:[!re&&(0,w.jsx)(a.az,{maxW:"200px",w:"100%",children:(0,w.jsx)(ne.Co,{onChange:e=>te((()=>K(e))),value:Y})}),(0,w.jsx)(a.az,{maxW:"180px",w:"100%",children:(0,w.jsx)(G,{onChange:e=>te((()=>U(e))),value:L,includeAll:!0})}),(0,w.jsx)(a.az,{maxW:"170px",w:"100%",children:(0,w.jsx)(c.p,{placeholder:__("Search by id or user"),variant:"msVariant",value:T,onChange:e=>te((()=>F(e.target.value)))})})]}),(0,w.jsx)(z.bQ,{headers:ie,data:(null===(g=A.data)||void 0===g?void 0:g.orders)||[],selectedItems:B,page:E,total:M,perPage:O,isLoading:A.isLoading||A.isRefetching,SkeletonCells:(0,w.jsx)(R,{}),onPageChange:W,onSelectItem:e=>{return s=e.id,void(B.includes(s)?N(B.filter((e=>e!==s))):N([...B,s]));var s},onRowClick:e=>de(e.id),onPerPageChange:e=>te((()=>P(e))),sort:q,onSort:$,noItemsIcon:(0,w.jsx)(x.I,{as:se.h,w:"24px",h:"24px"})}),(0,w.jsx)(ee,{orderId:_,isOpen:Z,onClose:()=>{(0,C.L)({order_id:void 0}),X()}})]})},te=()=>(0,w.jsx)(P.s,{w:"80px",h:"80px",bg:"default",borderRadius:"50px",align:"center",justify:"center",children:(0,w.jsx)(P.s,{w:"50px",h:"50px",bg:"default",borderRadius:"50px",align:"center",justify:"center",children:(0,w.jsx)(x.I,{as:se.h,w:"24px",h:"24px"})})}),oe=()=>{const{__:__}=(0,p.WD)();return(0,w.jsx)(P.s,{justify:"center",align:"center",h:"100vh",children:(0,w.jsxs)(P.s,{flexDirection:"column",align:"center",gap:"40px",children:[(0,w.jsx)(te,{}),(0,w.jsxs)(P.s,{flexDirection:"column",align:"center",gap:"10px",children:[(0,w.jsx)(d.E,{fontSize:"32px",color:"dark",fontWeight:"medium",lineHeight:"normal",maxW:"400px",textAlign:"center",children:__("WooCommerce Checkout enabled")}),(0,w.jsx)(d.E,{color:"dark70",fontSize:"14px",fontWeight:"medium",children:__("Get order information from orders page")})]}),(0,w.jsx)(l.$,{variant:"primary",m:"0",onClick:()=>{var e;window.location.href=(null===(e=window.react_orders)||void 0===e?void 0:e.woocommerce_orders_url)||""},children:__("Go to orders")})]})})},ie=()=>{var e;const{__:__}=(0,r.WD)(),s="1"===(null===(e=window.react_orders)||void 0===e?void 0:e.is_woocommerce),{coupon_name:n,back_url:o}=(0,C.a)(["coupon_name","back_url"]);if(s)return(0,w.jsx)(oe,{});return(0,w.jsx)(W,{children:(0,w.jsx)(t.HT,{title:n?"\u201c".concat(n,"\u201d ").concat(__("coupon orders")):__("Orders"),onBack:o?()=>{o&&(window.location.href=o)}:void 0,headerProps:o?{background:"white"}:void 0,button:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(re,{})})})}}}]);